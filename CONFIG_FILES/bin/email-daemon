#!/usr/bin/perl
use strict;
use warnings;

my $delayS = 30 * 60;
my $logFile = "/home/user/email-daemon.log";

sub main(@){
  system "echo started daemon >> $logFile";
  system "date >> $logFile";
  system "echo >> $logFile";
  system "echo >> $logFile";
  system "echo >> $logFile";
  while(1){
    sleep $delayS;
    system "date >> $logFile";
    system "n9-email 2>&1 | tee -a $logFile";
    system "echo >> $logFile";
    system "echo >> $logFile";
    system "echo >> $logFile";
  }
}

&main(@ARGV);
